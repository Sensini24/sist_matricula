<html xmlns="http://www.w3.org/1999/xhtml">
    <head>
        <title>Lista Matricula</title>
    <script src="https://cdn.tailwindcss.com?plugins=forms,container-queries"></script>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
    <script src="https://code.jquery.com/jquery-3.6.0.min.js" integrity="sha384-KyZXEAg3QhqLMpG8r+Knujsl5/5hb5gLl1PLTT3/rxxqOWP5PlJp/5hb5gLl1PLTT3r" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz" crossorigin="anonymous"></script>

    </head>
<body style="align-content:start; margin-left:230px;  margin-top:20px; background:#f4f6fa;" >


    <div class="filter-container p-4 bg-white w-full rounded-4 p-4 shadow-md" style="width: 110%">
            <div class="filter-container p-4  w-full bg-white rounded-2 p-4 shadow-lg mb-4 ">
                <div id="agregar-matricula">

                </div>
            </div>

            <div class="filter-container p-4  w-full bg-white rounded-2 p-4 shadow-lg flex">
                <div class="col-6">
                    <select id="filtrar_matricula" class="form-control appearance-none block w-full bg-gray-200 text-gray-700 border border-red-500 rounded py-3 px-4 mb-3 leading-tight focus:outline-none focus:bg-white">
                        <option>Filtrado</option>
                        <option value="Todos">Todos</option>
                        <option value="Pagado">Pagados</option>
                        <option value="Pendiente">Pendiente</option>
                    </select>

                    <div id="lista-matricula"></div>
                </div>

            <div class="col-6">
                    <div id="lista-sinMatricular"></div>
                </div>
            </div>
            
        </div>
    </body>
</html>
<script>
    document.addEventListener('DOMContentLoaded', ()=>{
        var listaMatricula = document.getElementById('lista-matricula');
        fetch(`ListarMatriculaCompleta`)
            .then(response => response.text())
            .then(html => {
                listaMatricula.innerHTML = html
            })

        var filtrarMatricula = document.getElementById('filtrar_matricula');
        filtrarMatricula.addEventListener('change', ()=>{
            fetch(`ListarMatricula?estado=${filtrarMatricula.value}`)
            .then(response => response.text())
            .then(html=>{
                listaMatricula.innerHTML = html
            })
        })

        var agregarMatricula = document.getElementById('agregar-matricula');

        fetch(`AgregarMatricula`)
            .then(response => response.text())
            .then(html => {
                agregarMatricula.innerHTML = html

                // var estudianteId = document.getElementById('estudianteId');

                // estudianteId.addEventListener('change', () => {
                //     console.log(estudianteId.value)
                // })

                var selectNivel = document.getElementById('selectNivel');
                selectNivel.addEventListener('change', ()=>{
                    var idNivel = document.getElementById('selectNivel').value;
                    console.log(idNivel)
                    fetch(`/Aula/ObtenerGradosPorNivel?idNivel=${idNivel}`)
                        .then(response => response.json())
                        .then(html => {

                            gradoSelect.innerHTML = '<option value="">Seleccionar Grado</option>';
                            seccionSelect.innerHTML = '<option value="">Seleccionar Seccion</option>';
                            html.forEach(element => {
                                var option = `<option value="">--Seleccione un grado--</option>`
                                gradoSelect.text = element.descripcion
                                gradoSelect.value = element.idGrado
                            });
                        })
                })

                
            })

        var sinMatricular = document.getElementById('lista-sinMatricular');
        fetch(`EstudiantesSinMatricular`)
            .then(response => response.text())
            .then(html => {
                sinMatricular.innerHTML = html
            })



        
    })
</script>