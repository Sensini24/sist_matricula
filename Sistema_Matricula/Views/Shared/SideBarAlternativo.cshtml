@using System.Security.Claims
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <!--Link de icons de google font-->
    <script src="https://cdn.tailwindcss.com?plugins=forms,container-queries"></script>
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@20..48,100..700,0..1,-50..200" />
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz" crossorigin="anonymous"></script>
    <script src='https://cdn.jsdelivr.net/npm/fullcalendar@3.10.2/dist/locale/es.js'></script>
    <link rel="stylesheet" href="~/css/sidealternativo.css" asp-append-version="true" />
    
    <script src="https://cdn.jsdelivr.net/npm/fullcalendar@6.1.15/index.global.min.js"></script>

    <title>Menu</title>
</head>
<body>
    <aside class="sidebar">
        <div class="sidebar-header">
            <img src="~/images/logo.jpg" alt="Logo">
            <h2>La Merced</h2>
        </div>
        <ul class="sidebar-links" >
            <h4>
                <span>Menu</span>
                <div class="menu-separator"></div>
            </h4>


            @if (User.IsInRole("Administrador"))
            {
                <!--MATRICULA-->
                <button class="w-full text-white mt-1 rounded-lg  border-1 flex justify-between items-center p-4 border-b border-gray-300 hover:bg-gray-100 hover:text-black focus:outline-none" onclick="toggleAccordion(this)">
                    <span class="material-symbols-outlined">
                        person_add
                    </span>Matricula
                    <svg class="w-4 h-4 transition-transform transform" viewBox="0 0 20 20" fill="currentColor">
                        <path fill-rule="evenodd" d="M5.293 9.293a1 1 0 011.414 0L10 12.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z" clip-rule="evenodd" />
                    </svg>
                </button>
                <div class="hidden p-4 border-b border-gray-300">
                    <!-- Contenido del segundo elemento -->
                <div class="align-items-center">
                    <a id="lista_estudiantes" class="nav-link text-dark text-white" asp-area="" asp-controller="Matricula" asp-action="ListaMatricula">
                        Listado Matricula
                    </a>
                    </div>
            </div>
            }

            @if (User.IsInRole("Administrador"))
            {
                <!--ESTUDIANTES-->
                <button class="w-full text-white mt-1 rounded-lg  border-1 flex justify-between items-center p-4 border-b border-gray-300 hover:bg-gray-100 hover:text-black focus:outline-none" onclick="toggleAccordion(this)">
                    <span class="material-symbols-outlined ">
                        school
                    </span>Estudiantes
                    <svg class="w-4 h-4 transition-transform transform" viewBox="0 0 20 20" fill="currentColor">
                        <path fill-rule="evenodd" d="M5.293 9.293a1 1 0 011.414 0L10 12.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z" clip-rule="evenodd" />
                    </svg>
                </button>
                <div class="hidden p-4 border-b border-gray-300">
                    <!-- Contenido del segundo elemento -->
                <div class="align-items-center">
                    <a id="lista_estudiantes" class="nav-link text-dark text-white" asp-area="" asp-controller="Estudiante" asp-action="ListarEstudiantes">
                        Lista Estudiantes
                    </a>
                    </div>
                <div class="align-items-center">
                    <a class="nav-link text-dark text-white mt-1 border-1" asp-area="" asp-controller="Usuario" asp-action="RegistrarUsuario">
                        Registrar Estudiante
                    </a>
                </div>
            </div>
            }

            @if (User.IsInRole("Administrador"))
            {
                <!--DOCENTES-->
                <button class="w-full text-white mt-1 rounded-lg border-1 flex justify-between items-center p-4 border-b border-gray-300 hover:bg-gray-100 hover:text-black focus:outline-none" onclick="toggleAccordion(this)">
                    <span class="material-symbols-outlined ">
                        hail
                    </span>Docentes
                    <svg class="w-4 h-4 transition-transform transform" viewBox="0 0 20 20" fill="currentColor">
                        <path fill-rule="evenodd" d="M5.293 9.293a1 1 0 011.414 0L10 12.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z" clip-rule="evenodd" />
                    </svg>
                </button>
                <div class="hidden p-4 border-b border-gray-300">
                    <!-- Contenido del segundo elemento -->
                <div class="align-items-center">
                    <a class="nav-link text-dark text-white mt-1 border-1" asp-area="" asp-controller="Docente" asp-action="ListarDocente" >
                        Lista Docentes
                    </a>
                </div>
                <div class=" align-content-center ">
                    <a class="nav-link text-dark text-white mt-3 border-1" asp-area="" asp-controller="Docente" asp-action="AgregarDocenteVM">
                        Nuevo Docente
                    </a>
                </div>
                
            </div>
            }

            @if (User.IsInRole("Administrador"))
            {
                <!--CURSO-->
                <button class="w-full text-white mt-1 rounded-lg border-1 flex justify-between items-center p-4 border-b border-gray-300 hover:bg-gray-100 hover:text-black focus:outline-none" onclick="toggleAccordion(this)">
                    <span class="material-symbols-outlined ">
                        menu_book
                    </span>Cursos
                    <svg class="w-4 h-4 transition-transform transform" viewBox="0 0 20 20" fill="currentColor">
                        <path fill-rule="evenodd" d="M5.293 9.293a1 1 0 011.414 0L10 12.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z" clip-rule="evenodd" />
                    </svg>
                </button>
                <div class="hidden p-4 border-b border-gray-300">

                <div class="align-items-center">
                    <a class="nav-link text-dark text-white mt-1 border-2" asp-area="" asp-controller="Curso" asp-action="AgregarCursoNoModal">
                        Listar Cursos
                    </a>
                </div>
                    <div class=" align-content-center ">
                        <a class="nav-link text-dark text-white mt-3 border-2" asp-area="" asp-controller="CursoDocente" asp-action="AgregarCursoDocenteView">
                            Asignar Curso a Docentes
                        </a>
                    </div>
                    <div class=" align-content-center ">
                        <a class="nav-link text-dark text-white mt-3 border-2" asp-area="" asp-controller="Curso" asp-action="AgregarCursoSeccion">
                            Asignar Curso a una Seccion
                        </a>
                    </div>


            </div>
            }

            @if (User.IsInRole("Administrador"))
            {
                <!--HORARIOS-->
                <button class="w-full text-white mt-1 rounded-lg border-1 flex justify-between items-center p-4 border-b border-gray-300 hover:bg-gray-100 hover:text-black focus:outline-none" onclick="toggleAccordion(this)">
                    <span class="material-symbols-outlined">
                        calendar_month
                    </span>Horarios
                    <svg class="w-4 h-4 transition-transform transform" viewBox="0 0 20 20" fill="currentColor">
                        <path fill-rule="evenodd" d="M5.293 9.293a1 1 0 011.414 0L10 12.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z" clip-rule="evenodd" />
                    </svg>
                </button>
                <div class="hidden p-4 border-b border-gray-300">
                    <!-- Contenido del segundo elemento -->
                <div class="align-items-center">
                    <a class="nav-link text-dark text-white mt-1 border-2" asp-area="" asp-controller="HorarioCurso" asp-action="Asignar">
                        Asignar Horarios
                    </a>
                </div>
            </div>
            }

            @if (User.IsInRole("Administrador"))
            {
                <!--AULAS-->
                <button class="w-full text-white mt-1 rounded-lg  border-1 flex justify-between items-center p-4 border-b border-gray-300 hover:bg-gray-100 hover:text-black focus:outline-none" onclick="toggleAccordion(this)">
                    <span class="material-symbols-outlined">
                        meeting_room
                    </span>Aulas
                    <svg class="w-4 h-4 transition-transform transform" viewBox="0 0 20 20" fill="currentColor">
                        <path fill-rule="evenodd" d="M5.293 9.293a1 1 0 011.414 0L10 12.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z" clip-rule="evenodd" />
                    </svg>
                </button>
                <div class="hidden p-4 border-b border-gray-300">
                    <!-- Contenido del segundo elemento -->
                    <div class="align-items-center">
                        <a id="lista_estudiantes" class="nav-link text-dark text-white" asp-area="" asp-controller="Aula" asp-action="PortalAulas">
                            Manteniminento de Aulas
                        </a>
                    </div>
                </div>
            }


            <!--HORARIO DE DOCENTE : INTERFAZ DE DOCENTE-->
            @if (User.IsInRole("Docente"))
            {
                <!--DOCENTES-->
                <button class="w-full text-white mt-1 rounded-lg border-1 flex justify-between items-center p-4 border-b border-gray-300 hover:bg-gray-100 hover:text-black focus:outline-none" onclick="toggleAccordion(this)">
                    <span class="material-symbols-outlined">
                        calendar_month
                    </span>Horario
                    <svg class="w-4 h-4 transition-transform transform" viewBox="0 0 20 20" fill="currentColor">
                        <path fill-rule="evenodd" d="M5.293 9.293a1 1 0 011.414 0L10 12.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z" clip-rule="evenodd" />
                    </svg>
                </button>
                <div class="hidden p-4 border-b border-gray-300">
                    <!-- Contenido del segundo elemento -->
                    <div class="align-items-center">
                        <a class="nav-link text-dark text-white mt-1 border-1" asp-area="" asp-controller="DatosDocente" asp-action="HorarioDocente">
                            - Horario
                        </a>
                    </div>

                </div>

                <button class="w-full text-white mt-1 rounded-lg border-1 flex justify-between items-center p-4 border-b border-gray-300 hover:bg-gray-100 hover:text-black focus:outline-none" onclick="toggleAccordion(this)">
                    <span class="material-symbols-outlined">
                        auto_stories
                    </span>Cursos
                    <svg class="w-4 h-4 transition-transform transform" viewBox="0 0 20 20" fill="currentColor">
                        <path fill-rule="evenodd" d="M5.293 9.293a1 1 0 011.414 0L10 12.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z" clip-rule="evenodd" />
                    </svg>
                </button>
                <div class="hidden p-4 border-b border-gray-300">
                    <!-- Contenido del segundo elemento -->
                    <div class="align-items-center">
                        <a class="nav-link text-dark text-white mt-1 border-1" asp-area="" asp-controller="DatosDocente" asp-action="HorarioDocente">
                            - Cursos Dictados
                        </a>
                    </div>

                </div>

                <button class="w-full text-white mt-1 rounded-lg border-1 flex justify-between items-center p-4 border-b border-gray-300 hover:bg-gray-100 hover:text-black focus:outline-none" onclick="toggleAccordion(this)">
                    <span class="material-symbols-outlined">
                        social_leaderboard
                    </span>Calificaciones
                    <svg class="w-4 h-4 transition-transform transform" viewBox="0 0 20 20" fill="currentColor">
                        <path fill-rule="evenodd" d="M5.293 9.293a1 1 0 011.414 0L10 12.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z" clip-rule="evenodd" />
                    </svg>
                </button>
                <div class="hidden p-4 border-b border-gray-300">
                    <!-- Contenido del segundo elemento -->
                    <div class="align-items-center">
                        <a class="nav-link text-dark text-white mt-1 border-1" asp-area="" asp-controller="Nota" asp-action="PortalNotasCursos">
                            - Notas
                        </a>
                    </div>

                </div>
            }


            <!-- <li>
                <a @* class="nav-link text-dark" asp-area="" asp-controller="Curso" asp-action="AgregarCursoSeccion" *@ id="AgregarCursoSeccion">
                    <span class="material-symbols-outlined">
                        notifications
                    </span> Notificaciones
                </a>

            </li>-->
            <li>
                <a href="" id="button-active">
                    <span class="material-symbols-outlined">
                        account_circle
                    </span>Perfil
                </a>
            </li>
            <li>
                <a href="" id="button-active">
                    <span class="material-symbols-outlined">
                        settings_applications
                    </span>Opciones
                </a>
            </li>
            <li>
                <a asp-controller="Auth" asp-action="Salir">
                    <span class="material-symbols-outlined">
                        Logout
                    </span>Salir
                </a>
            </li>
        </ul>
        <div class="user-account">
            <div class="user-profile align-items-center">

                <div class="user-detail flex flex-col items-center" style="margin-left:5px">
                    <img src="~/images/OIG3.jpg" alt="User" class="mx-auto">
                    <h3 class="text-center text-wrap">@User.Identity.Name</h3>
                    <span>@User.FindFirst(ClaimTypes.Role)?.Value</span> <!-- Mostrar el rol -->
                </div>
            </div>
        </div>
    </aside>



    <div class="container">
        <main role="main" class="pb-3">
            @RenderBody()
        </main>
        
    </div>

    <script src="~/lib/jquery/dist/jquery.min.js"></script>
    <script src="~/lib/bootstrap/dist/js/bootstrap.bundle.min.js"></script>
    <link src="~/js/site.js" asp-append-version="true"></link>
    @* <link href="~/css/stilos.css" rel="stylesheet" /> *@
    @await RenderSectionAsync("Scripts", required: false)

    <script>
        // script.js
        document.addEventListener('DOMContentLoaded', () => {
            const links = document.querySelectorAll('a');
            const currentPath = window.location.pathname.split('/').pop();
            //alert(currentPath);
            links.forEach(link => {
                const href = link.getAttribute('id').split('/').pop();

                if (href === currentPath) {
                    link.style.background = "#a01c15"
                    link.style.borderRadius = "15px"
                } else {
                    link.style.color = "#dbd4d4e3"
                }
            });
        });

        function toggleAccordion(element) {
            const content = element.nextElementSibling;
            content.classList.toggle('hidden');
            const svg = element.querySelector('svg');
            svg.classList.toggle('rotate-180');
        }

            // const buttons = document.querySelectorAll('button[data-url]');
            // buttons.forEach(button => {
            //     button.addEventListener('click', function () {
            //         const url = this.dataset.url;
            //         fetch(url)
            //             .then(response => response.text())
            //             .then(data => {
            //                 const contenedorInterfaz = document.getElementById('interfaz');
            //                 contenedorInterfaz.replaceChildren(); // Limpiar el contenido previo
            //                 contenedorInterfaz.innerHTML = data; // Agregar el nuevo contenido
            //                 window.history.pushState({}, '', url);
            //             });
            //     });
            // });

    </script>
</body>
</html>